# Pinterest Data Processing Pipeline
## Introduction

Pinterest has world-class machine learning engineering systems. They have billions of user interactions such as image uploads or image clicks which they need to process every day to inform the decisions to make. In this project, I build the system that takes in those events and runs them through two separate pipelines. One for the real-time streaming data and one processing batches of data. I use cloud resources such as google cloud platform as well as FastAPI, Kafka, Spark, Airflow, 

You can watch the AICore introduction video for [The Pinterst Project](https://youtu.be/f8VNs1pmhb0) on Youtube.

# The Event Emulator

AICore has provided me with a python script which uses SQLAlchemy to connect to an AWS RDS server. It runs an infinite loop where it pulls a row from the database and formats it as a dictionary called result, then uses `requests.post("http://localhost:8000/pin/", json=result)` as well as printing the data event to the terminal. 

## Project 

### FastAPI and uvicorn

![FastAPI](data:image/png;base64,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)

To complete the webhook I need to configure FastAPI to receive the post requests sent by the Event Emulator. 